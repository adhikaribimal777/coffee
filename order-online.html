<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Komorebi Cafe - Online Ordering</title>
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Noto+Serif+JP:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>

    <header class="main-header">
        <div class="container">
            <div class="logo">Komorebi Cafe</div>
            <nav class="main-nav">
                <a href="index.html#home">Home</a>
                <a href="index.html#features">Features</a>
                <a href="index.html#about">Our Story</a>
                <a href="index.html#take-out">Take Out</a>
                <a href="index.html#contact">Contact</a>
            </nav>
        </div>
    </header>

    <main>
        <section class="order-section container">
            <h1>Online Ordering</h1>
            <p>Welcome to our online ordering portal! Browse our menu and place your order for convenient pickup at
                Komorebi Cafe.</p>

            <div class="menu-category">
                <h2>Hand-Dripped Coffee</h2>
                <div class="menu-item" data-name="Komorebi House Blend" data-price="550">
                    <img src="./assets/images/Komorebi.jpeg" alt="Komorebi House Blend Coffee">
                    <div class="item-details">
                        <h3>Komorebi House Blend</h3>
                        <p>Our signature blend, rich and smooth with notes of caramel.</p>
                    </div>
                    <span class="item-price">¥550</span>
                    <div class="item-controls">
                        <input type="number" value="1" min="1" class="item-quantity">
                        <button class="add-to-cart-button">Add to Cart</button>
                    </div>
                </div>
                <div class="menu-item" data-name="Single Origin (Seasonal)" data-price="650">
                    <img src="./assets/images/Single.jpeg" alt="Single Origin Seasonal Coffee">
                    <div class="item-details">
                        <h3>Single Origin (Seasonal)</h3>
                        <p>Ask us about our current rotating selection of unique beans.</p>
                    </div>
                    <span class="item-price">¥650</span>
                    <div class="item-controls">
                        <input type="number" value="1" min="1" class="item-quantity">
                        <button class="add-to-cart-button">Add to Cart</button>
                    </div>
                </div>
                <div class="menu-item" data-name="Espresso" data-price="400">
                    <img src="./assets/images/Espresso.jpeg" alt="Espresso Shot">
                    <div class="item-details">
                        <h3>Espresso</h3>
                        <p>A concentrated shot of our rich Komorebi blend.</p>
                    </div>
                    <span class="item-price">¥400</span>
                    <div class="item-controls">
                        <input type="number" value="1" min="1" class="item-quantity">
                        <button class="add-to-cart-button">Add to Cart</button>
                    </div>
                </div>
                <div class="menu-item" data-name="Latte / Cappuccino" data-price="600">
                    <img src="./assets/images/Latte.jpeg" alt="Latte or Cappuccino">
                    <div class="item-details">
                        <h3>Latte / Cappuccino</h3>
                        <p>Perfectly steamed milk with our espresso. (Hot/Iced)</p>
                    </div>
                    <span class="item-price">¥600</span>
                    <div class="item-controls">
                        <input type="number" value="1" min="1" class="item-quantity">
                        <button class="add-to-cart-button">Add to Cart</button>
                    </div>
                </div>
            </div>

            <div class="menu-category">
                <h2>Homemade Pastries</h2>
                <div class="menu-item" data-name="Classic Butter Croissant" data-price="350">
                    <img src="./assets/images/Classic.jpeg" alt="Classic Butter Croissant">
                    <div class="item-details">
                        <h3>Classic Butter Croissant</h3>
                        <p>Flaky, buttery, and baked fresh daily.</p>
                    </div>
                    <span class="item-price">¥350</span>
                    <div class="item-controls">
                        <input type="number" value="1" min="1" class="item-quantity">
                        <button class="add-to-cart-button">Add to Cart</button>
                    </div>
                </div>
                <div class="menu-item" data-name="Seasonal Fruit Tart" data-price="500">
                    <img src="./assets/images/Seasonal.jpeg" alt="Seasonal Fruit Tart">
                    <div class="item-details">
                        <h3>Seasonal Fruit Tart</h3>
                        <p>Fresh fruits atop a sweet custard in a crispy crust.</p>
                    </div>
                    <span class="item-price">¥500</span>
                    <div class="item-controls">
                        <input type="number" value="1" min="1" class="item-quantity">
                        <button class="add-to-cart-button">Add to Cart</button>
                    </div>
                </div>
                <div class="menu-item" data-name="Matcha Financier" data-price="420">
                    <img src="./assets/images/Matcha.jpeg" alt="Matcha Financier">
                    <div class="item-details">
                        <h3>Matcha Financier</h3>
                        <p>A rich, moist cake with authentic Japanese matcha.</p>
                    </div>
                    <span class="item-price">¥420</span>
                    <div class="item-controls">
                        <input type="number" value="1" min="1" class="item-quantity">
                        <button class="add-to-cart-button">Add to Cart</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="shopping-cart-section" class="container">
            <h2>Your Order</h2>
            <ul id="cart-items">
                <li id="empty-cart-message" style="text-align: center; color: #888;">Your cart is empty. Please add some
                    delicious items!</li>
            </ul>
            <div id="cart-total">
                Total: ¥<span id="total-price">0</span>
            </div>
            <button class="checkout-button" id="checkout-button">
                Proceed to Checkout
            </button>
        </section>

        <section id="customer-details-section" class="container" style="display: none;">
            <h2>Your Contact Information</h2>
            <form id="customer-form">
                <div class="form-group">
                    <label for="customer-name">Name:</label>
                    <input type="text" id="customer-name" name="customerName" required>
                </div>
                <div class="form-group">
                    <label for="customer-email">Email:</label>
                    <input type="email" id="customer-email" name="customerEmail" required>
                </div>
                <div class="form-group">
                    <label for="customer-phone">Phone Number:</label>
                    <input type="tel" id="customer-phone" name="customerPhone" required>
                </div>
                <button type="submit" class="submit-details-button">Place Order</button>
            </form>
            <p class="external-link-note" style="text-align: center; margin-top: 20px;">
                (This is a demonstration. A real checkout process would involve a secure payment gateway.)
            </p>
        </section>
    </main>

    <footer id="contact" class="footer-section">
        <div class="container">
            <h3>Visit Us</h3>
            <div class="map-container">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d105217.30750093963!2d134.9066648499999!3d34.501848400000014!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3554c96d546f04c1%3A0xbec499fe87d8c44!2sAwaji%2C%20Hyogo!5e0!3m2!1sen!2sjp!4v1751026668336!5m2!1sen!2sjp" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            <footer id="contact" class="footer-section">
                <div class="container">
                    <h3>Visit Us</h3>
                    <p>123 Serenity Lane, Tokyo, Japan</p>
                    <p>Email: contact@komorebicafe.jp | Phone: (123) 456-7890</p>
                    <div class="social-links">
                        <a href="#">Instagram</a>
                        <a href="#">Facebook</a>
                        <a href="#">Twitter</a>
                    </div>
                    <p class="copyright">&copy; 2025 Komorebi Cafe. All Rights Reserved.</p>
                </div>
            </footer>

            <script>
                // Shopping Cart Logic
                let cart = []; // Array to store items in the cart

                // Get DOM elements
                const cartItemsList = document.getElementById('cart-items');
                const totalPriceSpan = document.getElementById('total-price');
                const emptyCartMessage = document.getElementById('empty-cart-message');
                const checkoutButton = document.getElementById('checkout-button');
                const orderSection = document.querySelector('.order-section'); // Get the menu section
                const shoppingCartSection = document.getElementById('shopping-cart-section'); // Get the shopping cart section
                const customerDetailsSection = document.getElementById('customer-details-section'); // New: Customer details section
                const customerForm = document.getElementById('customer-form'); // New: Customer form

                // Function to render cart items
                function renderCart() {
                    cartItemsList.innerHTML = ''; // Clear current cart display
                    let total = 0;

                    if (cart.length === 0) {
                        cartItemsList.appendChild(emptyCartMessage);
                        emptyCartMessage.style.display = 'block'; // Show empty message
                        checkoutButton.style.display = 'none'; // Hide checkout button if cart is empty
                    } else {
                        emptyCartMessage.style.display = 'none'; // Hide empty message
                        checkoutButton.style.display = 'inline-block'; // Show checkout button
                        cart.forEach((item, index) => {
                            const listItem = document.createElement('li');
                            listItem.innerHTML = `
                        <div class="cart-item-info">
                            ${item.name} x ${item.quantity}
                        </div>
                        <span>¥${(item.price * item.quantity).toLocaleString()}</span>
                        <button class="remove-item-button" data-index="${index}">Remove</button>
                    `;
                            cartItemsList.appendChild(listItem);
                            total += item.price * item.quantity;
                        });
                    }
                    totalPriceSpan.textContent = total.toLocaleString(); // Update total price with locale formatting
                }

                // Add event listener to all "Add to Cart" buttons
                document.querySelectorAll('.add-to-cart-button').forEach(button => {
                    button.addEventListener('click', (event) => {
                        const menuItem = event.target.closest('.menu-item');
                        const itemName = menuItem.dataset.name;
                        const itemPrice = parseInt(menuItem.dataset.price);
                        const quantityInput = menuItem.querySelector('.item-quantity');
                        const itemQuantity = parseInt(quantityInput.value);

                        if (itemQuantity <= 0) {
                            alert('Please enter a quantity greater than 0.');
                            return;
                        }

                        const existingItemIndex = cart.findIndex(item => item.name === itemName);

                        if (existingItemIndex > -1) {
                            cart[existingItemIndex].quantity += itemQuantity;
                        } else {
                            cart.push({
                                name: itemName,
                                price: itemPrice,
                                quantity: itemQuantity
                            });
                        }
                        renderCart(); // Re-render cart after adding item
                        quantityInput.value = 1; // Reset quantity input to 1 after adding
                    });
                });

                // Add event listener for removing items from cart (event delegation)
                cartItemsList.addEventListener('click', (event) => {
                    if (event.target.classList.contains('remove-item-button')) {
                        const indexToRemove = parseInt(event.target.dataset.index);
                        cart.splice(indexToRemove, 1); // Remove item from array
                        renderCart(); // Re-render cart
                    }
                });

                // Initial render of the cart when the page loads
                document.addEventListener('DOMContentLoaded', renderCart);

                // Modify Checkout button functionality to show customer details form
                checkoutButton.addEventListener('click', (event) => {
                    event.preventDefault(); // Prevent default link behavior
                    if (cart.length === 0) {
                        alert('Your cart is empty. Please add items before checking out.');
                        return;
                    }

                    // Hide menu and shopping cart, show customer details
                    orderSection.style.display = 'none';
                    shoppingCartSection.style.display = 'none';
                    customerDetailsSection.style.display = 'block';
                });

                // New: Event listener for the customer form submission
                customerForm.addEventListener('submit', (event) => {
                    event.preventDefault(); // Prevent default form submission

                    const customerName = document.getElementById('customer-name').value;
                    const customerEmail = document.getElementById('customer-email').value;
                    const customerPhone = document.getElementById('customer-phone').value;

                    // Basic validation
                    if (!customerName || !customerEmail || !customerPhone) {
                        alert('Please fill in all customer details.');
                        return;
                    }

                    // Construct order summary with customer details
                    let orderSummary = "Your Order Summary:\n\n";
                    cart.forEach(item => {
                        orderSummary += `${item.name} x ${item.quantity} = ¥${(item.price * item.quantity).toLocaleString()}\n`;
                    });
                    orderSummary += `\nTotal: ¥${totalPriceSpan.textContent}`;
                    orderSummary += `\n\nCustomer Details:\nName: ${customerName}\nEmail: ${customerEmail}\nPhone: ${customerPhone}`;
                    orderSummary += "\n\nThank you for your order! This is a demo. In a real app, you'd proceed to payment.";

                    alert(orderSummary); // Using alert for demo purposes

                    // Clear the cart and reset the display
                    cart = [];
                    renderCart(); // This will also hide the checkout button
                    customerForm.reset(); // Clear the form fields
                    customerDetailsSection.style.display = 'none'; // Hide customer details
                    orderSection.style.display = 'block'; // Show menu section again
                    shoppingCartSection.style.display = 'block'; // Show shopping cart section again
                });
            </script>

</body>

</html>